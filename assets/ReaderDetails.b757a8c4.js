import{r as e,D as a,d as r,_ as s,f as l,u as t,H as o,o as d,A as n,L as i,h as u,a as m,c,j as p,t as f,k as v,i as x}from"./index.503c7660.js";import{_ as k}from"./Dropdown.7d3fb010.js";import{_ as w}from"./LabeledInput.8b70bdc0.js";let y=!1;const b=e();async function g(){b.value=await a.service("spotify-speakers").find(),y||(y=!0,a.service("spotify-speakers").on("removed",(e=>{b.value=(b.value||[]).filter((a=>a._id!==e._id))})),a.service("spotify-speakers").on("created",(e=>{b.value=[...b.value||[],e]})))}a.on("login",(()=>{g()})),a.on("logout",(()=>{b.value=void 0}));var _=r({name:"ReaderDetails",components:{Button:s,Dropdown:k,LabeledInput:w,Textfield:l},props:{readerId:{type:String,required:!0}},setup(r){var s;const l=t(),u=o((()=>(n.value||[]).find((e=>e._id===r.readerId)))),m=e((null==(s=u.value)?void 0:s.name)||""),c=o((()=>(b.value||[]).map((e=>new i(e._id,e.name))))),p=e(c.value.find((e=>{var a;return e.id===(null==(a=u.value)?void 0:a.selectedSpeaker)})));return d((async()=>{await g()})),{reader:u,readerName:m,readerSpeaker:p,speakerListItems:c,saveReader:async()=>{u.value&&(await a.service("nfc-readers").patch(u.value._id,{name:m.value,selectedSpeaker:p.value?p.value.id:void 0}),await l.push({name:"settings"}))}}}});const h={key:0,class:"w-full flex flex-col"},I={class:"p-4 flex flex-row items-center"},L={class:"ml-2 text-3xl"},S={class:"bg-secondary max-h-full overflow-y-auto flex-grow p-6 bg-gradient-to-b from-primary to-secondary"},B={class:"flex text-gray-800 py-5"};_.render=function(e,a,r,s,l,t){const o=u("Button"),d=u("Textfield"),n=u("LabeledInput"),i=u("Dropdown");return e.reader?(m(),c("div",h,[p("header",I,[p(o,{to:{name:"settings"},icon:"fas fa-times",size:"md"}),p("span",L,"Box: "+f(e.readerName),1)]),p("main",S,[p(n,{label:"Name des Readers",class:"w-full"},{default:v((()=>[p(d,{modelValue:e.readerName,"onUpdate:modelValue":a[1]||(a[1]=a=>e.readerName=a),placeholder:"z. B. Porree-Box",class:"rounded-full"},null,8,["modelValue"])])),_:1}),p(n,{class:"mb-5 mt-10",label:"Box Lautsprecher"},{default:v((()=>[p(i,{modelValue:e.readerSpeaker,"onUpdate:modelValue":a[2]||(a[2]=a=>e.readerSpeaker=a),items:e.speakerListItems,removeable:!1},null,8,["modelValue","items"])])),_:1})]),p("footer",B,[p(o,{text:"Speichern",class:"mx-4 flex-grow",onClick:e.saveReader},null,8,["onClick"])])])):x("",!0)};export default _;
