import{d as a,e,_ as t,H as l,u as s,M as n,y as r,r as o,N as c,o as i,B as f,C as g,I as u,D as d,L as m,f as p,a as x,c as T,g as v,t as y,q as k,h as w,F as b}from"./index.cb495e94.js";import{_ as h}from"./LabeledInput.dfc7a733.js";import"./Loading.3a651a22.js";import{_ as I}from"./Dropdown.ebeedd2c.js";import{a as N,_,b as G}from"./TagStepTrack.79e3f382.js";var L=a({name:"TagDetails",components:{Textfield:e,Dropdown:I,LabeledInput:h,Button:t,TagStepImage:N,TagStepTrack:_,TagEntry:l},props:{tagId:{type:String,required:!0}},setup(a){const e=s(),t=n(),l=r((()=>t.name)),p=o(),x=o(),T=c(p),v=r({get:()=>p.value&&new m(p.value.group),set:a=>{p.value&&(p.value.group=(null==a?void 0:a.value)||"")}}),y=async()=>{var a;if(p.value&&(null==(a=x.value)?void 0:a.uri)!==p.value.trackUri)try{x.value=await G(p.value)}catch(e){console.error("ERROR:",e)}};return i((async()=>{try{p.value=await f.service("nfc-tags").get(a.tagId)}catch(t){e.push({name:"tag-not-found"})}await y(),await g()})),u((()=>t.name),y),{nfcTag:p,nfcTagTrack:x,nfcTagGroup:v,isNfcTagValid:T,saveNfcTag:async()=>{p.value&&(await f.service("nfc-tags").update(p.value._id,p.value),alert("Tag erfolgreich gespeichert."),await e.push({name:"home"}))},routeName:l,tagGroupListItems:d}}});const V={class:"mx-auto h-full w-full flex flex-col overflow-hidden"},j={class:"p-8 flex flex-row items-center space-x-5"},D={class:"ml-2 flex flex-col"},S=v("span",{class:"font-heading font-extralight text-2xl"},"Tag Editieren",-1),U={key:0,class:"text-m opacity-40"},B={key:0,class:"overflow-x-hidden overflow-y-auto bg-gradient-to-b from-primary to-secondary flex flex-col items-start justify-start text-2xl text-gray-800 flex-grow"},E={key:0,class:"tag-edit flex flex-col w-full p-4"},M={class:"flex flex-row items-center"},C={key:0},R={class:"flex flex-row items-center"},q={class:"py-5 flex-grow-0 flex items-center justify-evenly text-2xl text-gray-800"};L.render=function(a,e,t,l,s,n){const r=p("Button"),o=p("Textfield"),c=p("LabeledInput"),i=p("Dropdown"),f=p("TagEntry"),g=p("TagStepImage"),u=p("TagStepTrack");return x(),T("div",V,[v("header",j,[v(r,{back:"",icon:"fas fa-times",size:"md"}),v("div",D,[S,a.nfcTag?(x(),T("span",U,"Tag-ID: #"+y(a.nfcTag.nfcData),1)):k("",!0)])]),a.nfcTag?(x(),T("main",B,["tag-details"===a.routeName?(x(),T("div",E,[v(c,{label:"Name"},{default:w((()=>[v(o,{modelValue:a.nfcTag.name,"onUpdate:modelValue":e[1]||(e[1]=e=>a.nfcTag.name=e),placeholder:"z. B. Mario Figur",class:"rounded-full"},null,8,["modelValue"])])),_:1}),v(c,{label:"Gruppe"},{default:w((()=>[v(i,{modelValue:a.nfcTagGroup,"onUpdate:modelValue":e[2]||(e[2]=e=>a.nfcTagGroup=e),items:a.tagGroupListItems,"onUpdate:items":e[3]||(e[3]=e=>a.tagGroupListItems=e),removeable:!1,"placeholder-text":"W채hle eine Gruppe","enable-add-item":!0},null,8,["modelValue","items"])])),_:1}),v(c,{label:"Musik"},{default:w((()=>[v("div",M,[a.nfcTagTrack?(x(),T("span",C,y(a.nfcTagTrack.title),1)):k("",!0),v(r,{text:"Musik 채ndern",class:"px-3 ml-auto",to:{name:"tag-edit-track"}})])])),_:1}),v(c,{label:"Bild"},{default:w((()=>[v("div",R,[v(f,{class:"w-44",img:a.nfcTag.imageUrl},null,8,["img"]),v(r,{text:"Bild 채ndern",class:"px-3 ml-auto",to:{name:"tag-edit-image"}})])])),_:1})])):"tag-edit-image"===a.routeName?(x(),T(g,{key:1,"nfc-tag":a.nfcTag,"onUpdate:nfc-tag":e[4]||(e[4]=e=>a.nfcTag=e)},null,8,["nfc-tag"])):"tag-edit-track"===a.routeName?(x(),T(u,{key:2,"nfc-tag":a.nfcTag,"onUpdate:nfc-tag":e[5]||(e[5]=e=>a.nfcTag=e)},null,8,["nfc-tag"])):k("",!0)])):k("",!0),v("footer",q,["tag-details"!==a.routeName?(x(),T(b,{key:0},[v(r,{icon:"fas fa-caret-left",class:"ml-4",back:""}),v(r,{text:"Ausw채hlen",class:"mx-4 flex-grow",back:""})],64)):(x(),T(r,{key:1,text:"Speichern",class:"mx-4 flex-grow",enabled:a.isNfcTagValid,onClick:a.saveNfcTag},null,8,["enabled","onClick"]))])])};export default L;
