import{r as e,H as a,d as r,_ as s,f as l,u as t,C as d,o,E as n,D as i,L as u,h as c,a as m,c as p,j as f,t as v,k as x,i as k}from"./index.b14460f5.js";import{_ as w}from"./Dropdown.931d1608.js";import{_ as y}from"./LabeledInput.b49b45b7.js";let b=!1;const _=e();async function g(){_.value=await a.service("spotify-speakers").find(),b||(b=!0,a.service("spotify-speakers").on("removed",(e=>{_.value=(_.value||[]).filter((a=>a._id!==e._id))})),a.service("spotify-speakers").on("created",(e=>{_.value=[..._.value||[],e]})))}a.on("login",(()=>{g()})),a.on("logout",(()=>{_.value=void 0}));var h=r({name:"ReaderDetails",components:{Button:s,Dropdown:w,LabeledInput:y,Textfield:l},props:{readerId:{type:String,required:!0}},setup(r){var s;const l=t(),c=d((()=>(i.value||[]).find((e=>e._id===r.readerId)))),m=e((null==(s=c.value)?void 0:s.name)||""),p=d((()=>(_.value||[]).map((e=>new u(e._id,e.name))))),f=e(p.value.find((e=>{var a;return e.id===(null==(a=c.value)?void 0:a.selectedSpeaker)})));return o((async()=>{await g()})),{reader:c,readerName:m,readerSpeaker:f,speakerListItems:p,saveReader:async()=>{c.value&&(await a.service("nfc-readers").patch(c.value._id,{name:m.value,selectedSpeaker:f.value?f.value.id:void 0}),await l.push({name:"settings"}))},user:n}}});const B={key:0,class:"w-full flex flex-col"},L={class:"p-4 flex flex-row items-center"},I={class:"ml-2 text-3xl"},S={class:"bg-secondary max-h-full overflow-y-auto flex-grow p-6 bg-gradient-to-b from-primary to-secondary"},D={key:1,class:"text-white mt-12 text-2xl text-center"},V={class:"flex text-gray-800 py-5"};h.render=function(e,a,r,s,l,t){const d=c("Button"),o=c("Textfield"),n=c("LabeledInput"),i=c("Dropdown");return e.reader?(m(),p("div",B,[f("header",L,[f(d,{to:{name:"settings"},icon:"fas fa-times",size:"md"}),f("span",I,"Box: "+v(e.readerName),1)]),f("main",S,[f(n,{label:"Name der Box",class:"w-full"},{default:x((()=>[f(o,{modelValue:e.readerName,"onUpdate:modelValue":a[1]||(a[1]=a=>e.readerName=a),disabled:e.user._id!==e.reader.owner,placeholder:"z. B. Porree-Box",class:"rounded-full"},null,8,["modelValue","disabled"])])),_:1}),e.user&&e.user._id===e.reader.owner?(m(),p(n,{key:0,class:"mb-5 mt-10",label:"Box Lautsprecher"},{default:x((()=>[f(i,{modelValue:e.readerSpeaker,"onUpdate:modelValue":a[2]||(a[2]=a=>e.readerSpeaker=a),items:e.speakerListItems,removeable:!1},null,8,["modelValue","items"])])),_:1})):k("",!0),e.user._id!==e.reader.owner?(m(),p("span",D,"Diese Leek-Box gehört dir einfach nicht!")):k("",!0)]),f("footer",V,[e.user._id===e.reader.owner?(m(),p(d,{key:0,text:"Speichern",class:"mx-4 flex-grow",onClick:e.saveReader},null,8,["onClick"])):(m(),p(d,{key:1,text:"Zurück",class:"mx-4 flex-grow",back:""}))])])):k("",!0)};export default h;
