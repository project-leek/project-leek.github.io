import{d as e,j as a,r as t,a as s,c as l,e as n,f as c,u as r,o as i,k as o,l as f,m as d,t as u,F as g,h as p,_ as m,g as v,n as x}from"./index.97464308.js";import{_ as h}from"./Textfield.9d36f092.js";var T=e({name:"AddTagStepImage",components:{TagEntry:a},props:{nfcTag:{type:Object,required:!0}},setup:()=>({})});const y={class:"add-tag-step-image flex flex-grow flex-col justify-start items-start"},w=n("div",{class:"m-8 text-lg font-semibold text-white"},"Bild von Spotify",-1);T.render=function(e,a,c,r,i,o){const f=t("TagEntry");return s(),l("div",y,[w,n(f,{class:"ml-8 w-32",img:e.nfcTag.imageUrl},null,8,["img"])])};class k extends class{}{}var S=e({name:"AddTagStepPlaceOnReader",emits:["proceed","update:nfc-tag"],setup(e,a){const t=c(),s=r(),l=e=>{(async()=>{if(!e.attachedTagData)return;(await o.service("nfc-tags").find({query:{nfcData:e.attachedTagData}})).total>0&&(alert("Der Tag wurde bereits angelegt!"),s.push({name:"home"})),t.value&&(t.value.nfcData=e.attachedTagData,a.emit("update:nfc-tag",t),a.emit("proceed"))})()};i((()=>{t.value=new k,a.emit("update:nfc-tag",t),o.service("nfc-readers").on("patched",l).on("updated",l)})),f((()=>{o.service("nfc-readers").off("patched",l).off("updated",l)}))}});const b={class:"add-tag-step-place-tag-on-reader p-12"},j=n("img",{src:"/assets/attach-tag.e9d60af8.gif"},null,-1);S.render=function(e,a,t,n,c,r){return s(),l("div",b,[j])};var D=e({name:"AddTagStepTrack",components:{Textfield:h,TagEntry:a},props:{nfcTag:{type:Object,required:!0}},emits:["update:nfc-tag"],setup(e,a){const t=c(""),s=c([]),l=c(e.nfcTag),n=c(),r=c("");d(t,(async e=>{if(e.length>=3){const a={query:{name:e}};s.value=await o.service("spotify-tracks").find(a),0===s.value.length?r.value=`keine Ergebnisse fÃ¼r ${e}`:r.value="Passende Songs zu deiner Suche"}else 0===e.length&&(s.value=[],r.value="Bitte gebe einen Songtitel ein")}));return{search:t,tracks:s,changeTrack:e=>{n.value=e,l.value.spotifyTrackUri=e.uri,l.value.imageUrl=e.imageUri,a.emit("update:nfc-tag",l)},info:r}}});const U={id:"content_wrapper",class:"flex flex-col h-full"},C={class:"ml-10 text-white font-heading"},E={class:"w-full h-96 mt-5 overflow-y-auto"},q={id:"liste",class:"flex flex-col w-full"},A={class:"flex flex-col"},B={class:"ml-4 text-lg"},_={class:"ml-4 text-base"};D.render=function(e,a,c,r,i,o){const f=t("Textfield"),d=t("TagEntry");return s(),l("div",U,[n(f,{modelValue:e.search,"onUpdate:modelValue":a[1]||(a[1]=a=>e.search=a),class:"mx-auto -mt-4 mb-4",placeholder:"Titelsuche",icon:"fas fa-search"},null,8,["modelValue"]),n("span",C,u(e.info),1),n("div",E,[n("div",q,[(s(!0),l(g,null,p(e.tracks,(a=>(s(),l("div",{key:a._id,class:"flex flex-row py-2 px-2 hover:bg-primary rounded-2xl w-5/6 mx-auto",onClick:t=>e.changeTrack(a)},[n(d,{img:a.imageUri,class:"w-16"},null,8,["img"]),n("div",A,[n("span",B,u(a.title),1),n("span",_,u(a.artists.join(", ")),1)])],8,["onClick"])))),128))])])])};var F=e({name:"AddTag",components:{Button:m},setup(){const e=c(null),a=[S,D,T],t=c(0),s=r();return{activeStep:t,steps:a,nfcTag:e,updateTag:a=>{a.value?e.value=a.value:e.value=a},saveTag:async()=>{e.value&&(await o.service("nfc-tags").create(e.value),s.push({name:"home"}),alert("Neuen Tag erfolgreich erstellt."))}}}});const N={class:"add-tag w-full flex flex-col"},O={class:"p-8 flex flex-row"},P={class:"headlines ml-2 flex flex-col"},V=n("span",null,"Neuen Tag anlegen",-1),z={key:0},I={class:"bg-yellow-400 w-full flex-grow"},R={class:"flex flex-col items-center"},W={class:"steps flex flex-row justify-center transform -translate-y-3 bg-white rounded-t-md px-2 py-1"},Z={class:"actions flex flex-row justify-center mb-4"},$={key:3,class:"text-center"};F.render=function(e,a,c,r,i,o){const f=t("Button");return s(),l("div",N,[n("header",O,[n(f,{back:"",round:"",icon:"fas fa-times",class:"h-7 w-7"}),n("div",P,[V,e.nfcTag&&e.nfcTag.nfcData?(s(),l("span",z,"Tag-ID: #"+u(e.nfcTag.nfcData),1)):v("",!0)])]),n("div",I,[(s(),l(x(e.steps[e.activeStep]),{"nfc-tag":e.nfcTag,"onUpdate:nfcTag":e.updateTag,onProceed:a[1]||(a[1]=a=>e.activeStep++)},null,8,["nfc-tag","onUpdate:nfcTag"]))]),n("footer",R,[n("ul",W,[(s(!0),l(g,null,p(e.steps.length,(a=>(s(),l("li",{key:a,class:"mx-2"},u(e.activeStep===a-1?"x":"o"),1)))),128))]),n("div",Z,[0!==e.activeStep?(s(),l(f,{key:0,round:"","text-size":5,icon:"fas fa-chevron-left",class:"mr-4 px-4 py-2 text-center",onClick:a[2]||(a[2]=a=>e.activeStep--)})):v("",!0),e.activeStep===e.steps.length-1?(s(),l(f,{key:1,round:"",class:"flex-grow p-2",icon:"fas fa-download",text:"Tag erstellen",onClick:e.saveTag},null,8,["onClick"])):0!==e.activeStep?(s(),l(f,{key:2,class:"flex-grow p-2",icon:"fas fa-chevron-right",round:"",text:"Weiter",onClick:a[3]||(a[3]=a=>e.activeStep++)})):(s(),l("span",$,"Zum Fortfahren bitte NFC Tag an den Reader halten!"))])])])};export default F;
