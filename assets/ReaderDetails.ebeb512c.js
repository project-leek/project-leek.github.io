import{B as e,r as a,d as l,_ as r,e as s,u as t,C as d,o,y as n,L as i,f as u,a as m,c,g as f,t as p,h as v,q as x}from"./index.cfbfa597.js";import{_ as w}from"./LabeledInput.276ff0bb.js";import{_ as b}from"./Dropdown.de8a4599.js";const g=e.service("spotify-speakers");let y=!1;const k=a();async function _(){k.value=await g.find(),y||(y=!0,g.on("removed",(e=>{k.value=(k.value||[]).filter((a=>a._id!==e._id))})),g.on("created",(e=>{k.value=[...k.value||[],e]})))}e.on("login",(()=>{_()}));var h=l({name:"ReaderDetails",components:{Button:r,Dropdown:b,LabeledInput:w,Textfield:s},props:{readerId:{type:String,required:!0}},setup(l){var r;const s=t(),u=d((()=>(n.value||[]).find((e=>e._id===l.readerId)))),m=a((null==(r=u.value)?void 0:r.name)||""),c=d((()=>(k.value||[]).map((e=>new i(e._id,e.name))))),f=a(c.value.find((e=>{var a;return e.id===(null==(a=u.value)?void 0:a.selectedSpeaker)})));return o((async()=>{await _()})),{reader:u,readerName:m,readerSpeaker:f,speakerListItems:c,saveReader:async()=>{u.value&&(await e.service("nfc-readers").patch(u.value._id,{name:m.value,selectedSpeaker:f.value?f.value.id:void 0}),await s.push({name:"settings"}))}}}});const I={key:0,class:"w-full flex flex-col"},L={class:"p-8 flex flex-row items-center"},S={class:"ml-2 text-3xl"},B={class:"bg-secondary max-h-full overflow-y-auto flex-grow p-6 bg-gradient-to-b from-primary to-secondary"},V={class:"flex text-gray-800 py-5"};h.render=function(e,a,l,r,s,t){const d=u("Button"),o=u("Textfield"),n=u("LabeledInput"),i=u("Dropdown");return e.reader?(m(),c("div",I,[f("header",L,[f(d,{to:{name:"settings"},icon:"fas fa-times",size:"md"}),f("span",S,"Box: "+p(e.readerName),1)]),f("main",B,[f(n,{label:"Tag Name",class:"w-full"},{default:v((()=>[f(o,{modelValue:e.readerName,"onUpdate:modelValue":a[1]||(a[1]=a=>e.readerName=a),placeholder:"z. B. Mario Figur",class:"rounded-full"},null,8,["modelValue"])])),_:1}),f(n,{class:"mb-5 mt-10",label:"Box Lautsprecher"},{default:v((()=>[f(i,{modelValue:e.readerSpeaker,"onUpdate:modelValue":a[2]||(a[2]=a=>e.readerSpeaker=a),items:e.speakerListItems,removeable:!1},null,8,["modelValue","items"])])),_:1})]),f("footer",V,[f(d,{text:"Speichern",class:"mx-4 flex-grow",onClick:e.saveReader},null,8,["onClick"])])])):x("",!0)};export default h;
