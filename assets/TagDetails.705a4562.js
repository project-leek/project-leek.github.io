import{d as e,e as a,_ as t,I as l,u as s,N as n,y as r,r as o,O as c,o as i,z as u,D as f,J as g,E as d,L as m,f as p,a as x,c as T,g as v,t as k,q as y,h,F as w}from"./index.ed4902ed.js";import{_ as b}from"./LabeledInput.2e6703e0.js";import"./Loading.b1cbdbc0.js";import{_ as I}from"./Dropdown.0a1e03cd.js";import{a as N,_,b as G}from"./TagStepTrack.07f95c2d.js";var L=e({name:"TagDetails",components:{Textfield:a,Dropdown:I,LabeledInput:b,Button:t,TagStepImage:N,TagStepTrack:_,TagEntry:l},props:{tagId:{type:String,required:!0}},setup(e){const a=s(),t=n(),l=r((()=>t.name)),p=o(),x=o(),T=c(p),v=r({get:()=>p.value&&new m(p.value.group),set:e=>{p.value&&(p.value.group=(null==e?void 0:e.value)||"")}}),k=async()=>{var e;if(p.value&&(null==(e=x.value)?void 0:e.uri)!==p.value.trackUri)try{x.value=await G(p.value)}catch(a){console.error("ERROR:",a)}};return i((async()=>{try{p.value=await u.service("nfc-tags").get(e.tagId)}catch(t){a.push({name:"tag-not-found"})}await k(),await f()})),g((()=>t.name),k),{nfcTag:p,nfcTagTrack:x,nfcTagGroup:v,isNfcTagValid:T,saveNfcTag:async()=>{p.value&&(await u.service("nfc-tags").update(p.value._id,p.value),alert("Tag erfolgreich gespeichert."),await a.push({name:"home"}))},routeName:l,router:a,tagGroupListItems:d}}});const V={class:"mx-auto h-full w-full flex flex-col overflow-hidden"},j={class:"p-8 flex flex-row items-center space-x-5"},D={class:"ml-2 flex flex-col"},S=v("span",{class:"font-heading font-extralight text-2xl"},"Tag Editieren",-1),U={key:0,class:"text-m opacity-40"},C={key:0,class:"overflow-x-hidden overflow-y-auto bg-gradient-to-b from-primary to-secondary flex flex-col items-start justify-start text-2xl text-gray-800 flex-grow"},B={key:0,class:"tag-edit flex flex-col w-full p-4"},E={class:"flex flex-row items-center"},M={key:0},R={class:"flex flex-row items-center"},q={class:"py-5 flex-grow-0 flex items-center justify-evenly text-2xl text-gray-800"};L.render=function(e,a,t,l,s,n){const r=p("Button"),o=p("Textfield"),c=p("LabeledInput"),i=p("Dropdown"),u=p("TagEntry"),f=p("TagStepImage"),g=p("TagStepTrack");return x(),T("div",V,[v("header",j,[v(r,{back:"",round:"",icon:"fas fa-times",class:"h-10 w-10 flex-shrink-0",text:""}),v("div",D,[S,e.nfcTag?(x(),T("span",U,"Tag-ID: #"+k(e.nfcTag.nfcData),1)):y("",!0)])]),e.nfcTag?(x(),T("main",C,["tag-details"===e.routeName?(x(),T("div",B,[v(c,{label:"Name"},{default:h((()=>[v(o,{modelValue:e.nfcTag.name,"onUpdate:modelValue":a[1]||(a[1]=a=>e.nfcTag.name=a),placeholder:"z. B. Mario Figur",class:"rounded-full"},null,8,["modelValue"])])),_:1}),v(c,{label:"Gruppe"},{default:h((()=>[v(i,{modelValue:e.nfcTagGroup,"onUpdate:modelValue":a[2]||(a[2]=a=>e.nfcTagGroup=a),items:e.tagGroupListItems,"onUpdate:items":a[3]||(a[3]=a=>e.tagGroupListItems=a),removeable:!1,"placeholder-text":"W채hle eine Gruppe","enable-add-item":!0},null,8,["modelValue","items"])])),_:1}),v(c,{label:"Musik"},{default:h((()=>[v("div",E,[e.nfcTagTrack?(x(),T("span",M,k(e.nfcTagTrack.title),1)):y("",!0),v(r,{class:"p-3 px-6 ml-auto",text:"Musik 채ndern",onClick:a[4]||(a[4]=a=>e.router.push({name:"tag-edit-track"}))})])])),_:1}),v(c,{label:"Bild"},{default:h((()=>[v("div",R,[v(u,{class:"w-32",img:e.nfcTag.imageUrl},null,8,["img"]),v(r,{class:"p-3 px-6 ml-auto",text:"Bild 채ndern",onClick:a[5]||(a[5]=a=>e.router.push({name:"tag-edit-image"}))})])])),_:1})])):"tag-edit-image"===e.routeName?(x(),T(f,{key:1,"nfc-tag":e.nfcTag,"onUpdate:nfc-tag":a[6]||(a[6]=a=>e.nfcTag=a)},null,8,["nfc-tag"])):"tag-edit-track"===e.routeName?(x(),T(g,{key:2,"nfc-tag":e.nfcTag,"onUpdate:nfc-tag":a[7]||(a[7]=a=>e.nfcTag=a)},null,8,["nfc-tag"])):y("",!0)])):y("",!0),v("footer",q,["tag-details"!==e.routeName?(x(),T(w,{key:0},[v(r,{icon:"fas fa-caret-left",class:"w-14 h-14 ml-4",round:"",onClick:a[8]||(a[8]=a=>e.router.go(-1))}),v(r,{text:"Ausw채hlen",class:"p-3 mx-4 flex-1",onClick:a[9]||(a[9]=a=>e.router.go(-1))})],64)):(x(),T(r,{key:1,text:"Speichern",class:"p-3 mx-4 flex-1",enabled:e.isNfcTagValid,onClick:e.saveNfcTag},null,8,["enabled","onClick"]))])])};export default L;
