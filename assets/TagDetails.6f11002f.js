import{d as a,e,_ as t,K as l,u as s,P as n,E as i,r as o,Q as r,o as c,D as d,G as g,M as f,H as u,L as m,g as p,a as x,c as T,i as v,t as y,h as w,j as k}from"./index.bc58c633.js";import{_ as h}from"./LabeledInput.70899b0a.js";import"./Loading.de2970ad.js";import{_ as b}from"./Dropdown.275c704d.js";import{a as I,_ as N,b as U}from"./TagStepTrack.2dd807a8.js";var G=a({name:"TagDetails",components:{Textfield:e,Dropdown:b,LabeledInput:h,Button:t,TagStepImage:I,TagStepTrack:N,TagEntry:l},props:{tagId:{type:String,required:!0}},setup(a){const e=s(),t=n(),l=i((()=>t.name)),p=o(),x=o(),T=r(p),v=i({get:()=>p.value&&new m(p.value.group),set:a=>{p.value&&(p.value.group=(null==a?void 0:a.value)||"")}});return c((async()=>{try{p.value=await d.service("nfc-tags").get(a.tagId)}catch(t){e.push({name:"tag-not-found"})}await g()})),f((()=>{var a;return null==(a=p.value)?void 0:a.trackUri}),(async a=>{p.value&&(x.value&&a===x.value.uri||(x.value=await U(p.value)),p.value.imageUrl)})),{nfcTag:p,nfcTagTrack:x,nfcTagGroup:v,isNfcTagValid:T,saveNfcTag:async()=>{p.value&&(await d.service("nfc-tags").update(p.value._id,p.value),alert("Tag erfolgreich gespeichert."),await e.push({name:"home"}))},routeName:l,tagGroupListItems:u}}});const _={class:"mx-auto h-full w-full flex flex-col overflow-hidden"},j={class:"p-4 flex flex-row items-center space-x-5"},L={class:"ml-2 flex flex-col"},V=v("span",{class:"font-heading font-extralight text-2xl"},"Tag Editieren",-1),D={key:0,class:"text-m opacity-40"},S={key:0,class:"overflow-x-hidden overflow-y-auto bg-gradient-to-b from-primary to-secondary flex flex-col items-start justify-start text-2xl text-gray-800 flex-grow"},z={key:0,class:"tag-edit flex flex-col w-full p-4"},B={class:"flex flex-row items-center"},E={class:"flex relative bg-gray-100 rounded-2xl p-2 w-44 h-44 overflow-hidden"},M=v("img",{class:"absolute w-80/100 top-10/100 left-10/100 opacity-5",src:"/assets/spotify.6acea9a0.png"},null,-1),C={key:0,class:"my-auto text-center overflow-ellipsis overflow-hidden"},q={class:"flex flex-row items-center"},A={class:"py-5 flex-grow-0 flex items-center justify-evenly text-2xl text-gray-800"};G.render=function(a,e,t,l,s,n){const i=p("Button"),o=p("Textfield"),r=p("LabeledInput"),c=p("Dropdown"),d=p("TagEntry"),g=p("TagStepImage"),f=p("TagStepTrack");return x(),T("div",_,[v("header",j,[v(i,{back:"",icon:"fas fa-times",size:"md"}),v("div",L,[V,a.nfcTag?(x(),T("span",D,"Tag-ID: #"+y(a.nfcTag.nfcData),1)):w("",!0)])]),a.nfcTag?(x(),T("main",S,["tag-details"===a.routeName?(x(),T("div",z,[v(r,{label:"Name"},{default:k((()=>[v(o,{modelValue:a.nfcTag.name,"onUpdate:modelValue":e[1]||(e[1]=e=>a.nfcTag.name=e),placeholder:"z. B. Mario Figur",class:"rounded-full"},null,8,["modelValue"])])),_:1}),v(r,{label:"Gruppe",class:"mt-8"},{default:k((()=>[v(c,{modelValue:a.nfcTagGroup,"onUpdate:modelValue":e[2]||(e[2]=e=>a.nfcTagGroup=e),items:a.tagGroupListItems,"onUpdate:items":e[3]||(e[3]=e=>a.tagGroupListItems=e),removeable:!1,"placeholder-text":"W채hle eine Gruppe","enable-add-item":!0},null,8,["modelValue","items"])])),_:1}),v(r,{label:"Musik",class:"mt-8"},{default:k((()=>[v("div",B,[v("div",E,[M,a.nfcTagTrack?(x(),T("span",C,y(a.nfcTagTrack.title),1)):w("",!0)]),v(i,{icon:"far fa-edit",text:"Musik 채ndern",class:"hidden md:flex ml-auto",size:"lg",to:{name:"tag-edit-track"}}),v(i,{icon:"far fa-edit",class:"md:hidden ml-auto",size:"lg",to:{name:"tag-edit-track"}})])])),_:1}),v(r,{label:"Bild",class:"mt-8"},{default:k((()=>[v("div",q,["spotify"===a.nfcTag.imageUrl&&a.nfcTagTrack?(x(),T(d,{key:0,class:"w-44",img:a.nfcTagTrack.imageUri},null,8,["img"])):(x(),T(d,{key:1,class:"w-44",img:a.nfcTag.imageUrl},null,8,["img"])),v(i,{icon:"far fa-edit",class:"md:hidden ml-auto",size:"lg",to:{name:"tag-edit-image"}}),v(i,{icon:"far fa-edit",text:"Bild 채ndern",class:"hidden md:flex ml-auto",size:"lg",to:{name:"tag-edit-image"}})])])),_:1})])):"tag-edit-image"===a.routeName?(x(),T(g,{key:1,"nfc-tag":a.nfcTag,"onUpdate:nfc-tag":e[4]||(e[4]=e=>a.nfcTag=e)},null,8,["nfc-tag"])):"tag-edit-track"===a.routeName?(x(),T(f,{key:2,"nfc-tag":a.nfcTag,"onUpdate:nfc-tag":e[5]||(e[5]=e=>a.nfcTag=e)},null,8,["nfc-tag"])):w("",!0)])):w("",!0),v("footer",A,["tag-details"!==a.routeName?(x(),T(i,{key:0,text:"Ausw채hlen",class:"mx-4 flex-grow",back:""})):(x(),T(i,{key:1,text:"Speichern",class:"mx-4 flex-grow",disabled:!a.isNfcTagValid,onClick:a.saveNfcTag},null,8,["disabled","onClick"]))])])};export default G;
